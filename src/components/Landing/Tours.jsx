import React, { useState } from "react";
import { Link, useNavigate } from "react-router-dom";
import Drop5 from "../drop-dwon/Drop5";

import Tours2 from "../../assets/Images/Tours2.png";
import Tours1 from "../../assets/Images/Tours1.png";
import Tours3 from "../../assets/Images/Tours3.png";
import { useSelector } from "react-redux";
 
import DropDestination from "../drop-dwon/dropDestination";
const Tours = () => {
  const navigate = useNavigate();
  const { AllTours, loading, error } = useSelector((state) => state.tours);

  console.log(AllTours, "TS");

  const HandleTourNavigation = (id) => {
    navigate(`/tour/${id}`);
  };

  const [name,setname]=useState(null)

 
  const TourNameCallback=(name)=>{

    console.log(name,"NAME")

    setname(name)

    
    

  }


  const DestinationNames=useSelector((state)=>state.destinations.AllDestinations)

  const NameArray= DestinationNames.map((e)=>e.Destination_Name)

  NameArray.push('none')

  return (
    <>
      <section className="Tours">
        <div className="container">
          <div className="main-Tours">
            <div className="Tours-tital">
              <h2>Tours</h2>

              <div className="Tours-in-box">
                <div className="icon-bg">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="28"
                    height="31"
                    viewBox="0 0 28 31"
                    fill="none"
                  >
                    <path
                      d="M18.7984 20.4821C22.0971 15.3058 21.6824 15.9516 21.7775 15.8166C22.9785 14.1226 23.6133 12.1289 23.6133 10.0508C23.6133 4.5398 19.1412 0 13.623 0C8.12285 0 3.63281 4.53084 3.63281 10.0508C3.63281 12.1275 4.28091 14.1735 5.52127 15.8903L8.44762 20.4822C5.31886 20.963 0 22.3958 0 25.5508C0 26.7009 0.75066 28.3399 4.3268 29.617C6.82387 30.5088 10.1253 31 13.623 31C20.1636 31 27.2461 29.155 27.2461 25.5508C27.2461 22.3953 21.9335 20.9639 18.7984 20.4821ZM7.03851 14.8912C7.02852 14.8756 7.01811 14.8603 7.00721 14.8453C5.97507 13.4254 5.44922 11.7425 5.44922 10.0508C5.44922 5.50868 9.10661 1.81641 13.623 1.81641C18.1301 1.81641 21.7969 5.51031 21.7969 10.0508C21.7969 11.7452 21.281 13.371 20.3046 14.7535C20.2171 14.8689 20.6736 14.1598 13.623 25.2232L7.03851 14.8912ZM13.623 29.1836C6.47888 29.1836 1.81641 27.0836 1.81641 25.5508C1.81641 24.5205 4.21212 22.8265 9.52087 22.1662L12.8571 27.4012C13.0239 27.6629 13.3127 27.8213 13.623 27.8213C13.9333 27.8213 14.2222 27.6628 14.3888 27.4012L17.725 22.1662C23.0339 22.8265 25.4297 24.5205 25.4297 25.5508C25.4297 27.0706 20.8092 29.1836 13.623 29.1836Z"
                      fill="white"
                      fill-opacity="0.5"
                    />
                    <path
                      d="M13.623 5.50977C11.1191 5.50977 9.08203 7.54687 9.08203 10.0508C9.08203 12.5547 11.1191 14.5918 13.623 14.5918C16.127 14.5918 18.1641 12.5547 18.1641 10.0508C18.1641 7.54687 16.127 5.50977 13.623 5.50977ZM13.623 12.7754C12.1207 12.7754 10.8984 11.5531 10.8984 10.0508C10.8984 8.54843 12.1207 7.32617 13.623 7.32617C15.1254 7.32617 16.3477 8.54843 16.3477 10.0508C16.3477 11.5531 15.1254 12.7754 13.623 12.7754Z"
                      fill="white"
                      fill-opacity="0.5"
                    />
                  </svg>
                </div>
                <DropDestination TourData={NameArray} TourNameCallback={TourNameCallback}/>
                <div className="drop-icon">
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="21"
                    height="12"
                    viewBox="0 0 21 12"
                    fill="none"
                  >
                    <path
                      d="M10.5 12C10.2559 12 10.0116 11.9023 9.82518 11.707L0.279741 1.70705C-0.093247 1.31631 -0.093247 0.683559 0.279741 0.293061C0.652729 -0.097437 1.25672 -0.097687 1.62947 0.293061L10.5 9.58601L19.3706 0.293061C19.7436 -0.097687 20.3476 -0.097687 20.7203 0.293061C21.0931 0.683809 21.0933 1.31656 20.7203 1.70705L11.1749 11.707C10.9885 11.9023 10.7442 12 10.5 12Z"
                      fill="#D5AE82"
                    />
                  </svg>
                </div>
              </div>
            </div>

            <div className="Tours-box">

              {
                name===null || name==='none'?(
                  <>
                  
              {

AllTours?.map((tour, i) => (
  <div className="Tours-card" key={i}>
    <div className="Tours-card-img">
      <img src={tour?.coverImage} />
    </div>
    <div className="Tours-card-tital">
      <h2>{tour?.TourName}</h2>

      <span className="Duration">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="21"
          height="21"
          viewBox="0 0 21 21"
          fill="none"
        >
          <path
            d="M10.5002 18.832C12.7103 18.832 14.8299 17.9541 16.3927 16.3913C17.9555 14.8285 18.8335 12.7088 18.8335 10.4987C18.8335 8.28856 17.9555 6.16895 16.3927 4.60614C14.8299 3.04334 12.7103 2.16536 10.5002 2.16536C8.29003 2.16536 6.17041 3.04334 4.60761 4.60614C3.0448 6.16895 2.16683 8.28856 2.16683 10.4987C2.16683 12.7088 3.0448 14.8285 4.60761 16.3913C6.17041 17.9541 8.29003 18.832 10.5002 18.832ZM10.5002 0.0820312C11.8681 0.0820313 13.2226 0.351466 14.4865 0.874953C15.7503 1.39844 16.8986 2.16573 17.8659 3.133C18.8331 4.10028 19.6004 5.2486 20.1239 6.51241C20.6474 7.77622 20.9168 9.13076 20.9168 10.4987C20.9168 13.2614 19.8194 15.9109 17.8659 17.8644C15.9124 19.8179 13.2628 20.9154 10.5002 20.9154C4.73975 20.9154 0.0834961 16.2279 0.0834961 10.4987C0.0834961 7.73603 1.18096 5.08651 3.13447 3.133C5.08797 1.1795 7.73749 0.0820313 10.5002 0.0820312ZM11.021 5.29037V10.7591L15.7085 13.5404L14.9272 14.8216L9.4585 11.5404V5.29037H11.021Z"
            fill="#FFD700"
          />
        </svg>
        <p>Duration: {tour?.TourDuration}</p>
      </span>

      <div className="Seats-box">
        <span className="Duration">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="23"
            height="23"
            viewBox="0 0 23 23"
            fill="none"
          >
            <g clip-path="url(#clip0_194_965)">
              <path
                d="M17.5379 16.3699C17.767 16.282 18.013 16.2353 18.2647 16.2353H19.2794C20.2303 16.2353 21.0011 17.0061 21.0011 17.957C21.0011 18.2242 20.9389 18.4879 20.8193 18.7269L19.4307 21.5042C18.9723 22.4209 18.0354 23 17.0105 23H5.98954C4.96462 23 4.02768 22.4209 3.56933 21.5042L2.18067 18.7269C1.75544 17.8765 2.10017 16.8423 2.95064 16.417C3.1897 16.2975 3.45331 16.2353 3.72059 16.2353H4.85136C5.06125 16.2353 5.26779 16.2678 5.46424 16.3301C5.59206 13.9107 5.95332 11.2623 6.5473 8.38396C6.74187 7.4411 7.57211 6.76471 8.53483 6.76471H8.79412V5.41176H8.57795C7.83074 5.41176 7.22501 4.80603 7.22501 4.05882C7.22501 3.9843 7.23117 3.90991 7.24343 3.8364L7.6944 1.13052C7.80313 0.478148 8.36758 0 9.02895 0H13.9711C14.6324 0 15.1969 0.478148 15.3056 1.13052L15.7566 3.8364C15.8794 4.57344 15.3815 5.27051 14.6445 5.39335C14.571 5.4056 14.4966 5.41176 14.422 5.41176H14.2059V6.76471H14.4653C15.428 6.76471 16.2581 7.44098 16.4528 8.38371C17.0501 11.2762 17.4121 13.938 17.5379 16.3699ZM8.57795 4.05882H14.422L13.9711 1.35294H9.02895L8.57795 4.05882ZM10.1471 6.76471H12.8529V5.41176H10.1471V6.76471ZM15.1278 8.65731C15.0629 8.34306 14.7862 8.11765 14.4653 8.11765H8.53483C8.21392 8.11765 7.93719 8.34311 7.87233 8.65739C7.21452 11.8451 6.85009 14.7334 6.77802 17.3213L6.84677 17.3901C6.97363 17.517 7.1457 17.5882 7.32511 17.5882H15.8971C16.0137 17.5882 16.127 17.5581 16.2266 17.5026C16.1669 14.8661 15.801 11.9173 15.1278 8.65731ZM7.44118 18.9412H7.32511C6.78688 18.9412 6.27068 18.7274 5.89009 18.3468L5.3297 17.7864C5.20284 17.6595 5.03077 17.5882 4.85136 17.5882H3.72059C3.66334 17.5882 3.60688 17.6016 3.55568 17.6272C3.37354 17.7182 3.2997 17.9397 3.39078 18.1219L4.77943 20.8992C5.00861 21.3575 5.47708 21.6471 5.98954 21.6471H17.0105C17.5229 21.6471 17.9914 21.3575 18.2206 20.8992L19.6092 18.1219C19.6348 18.0707 19.6481 18.0142 19.6481 17.957C19.6481 17.7533 19.4831 17.5882 19.2794 17.5882H18.2647C18.0518 17.5882 17.8513 17.6885 17.7235 17.8588L17.5206 18.1294C17.1373 18.6404 16.5358 18.9412 15.8971 18.9412H15.5588V19.6176C15.5588 19.9913 15.256 20.2941 14.8824 20.2941C14.5087 20.2941 14.2059 19.9913 14.2059 19.6176V18.9412H12.1765V19.6176C12.1765 19.9913 11.8736 20.2941 11.5 20.2941C11.1264 20.2941 10.8235 19.9913 10.8235 19.6176V18.9412H8.79412V19.6176C8.79412 19.9913 8.49125 20.2941 8.11765 20.2941C7.74404 20.2941 7.44118 19.9913 7.44118 19.6176V18.9412ZM14.2059 13.8676C14.5795 13.8676 14.8824 14.1705 14.8824 14.5441C14.8824 14.9177 14.5795 15.2206 14.2059 15.2206H8.79412C8.42051 15.2206 8.11765 14.9177 8.11765 14.5441C8.11765 14.1705 8.42051 13.8676 8.79412 13.8676H14.2059ZM13.8676 10.4853C14.2413 10.4853 14.5441 10.7882 14.5441 11.1618C14.5441 11.5354 14.2413 11.8382 13.8676 11.8382H9.13235C8.75875 11.8382 8.45588 11.5354 8.45588 11.1618C8.45588 10.7882 8.75875 10.4853 9.13235 10.4853H13.8676Z"
                fill="#FFD700"
              ></path>
            </g>
            <defs>
              <clipPath id="clip0_194_965">
                <rect width="23" height="23" fill="white"></rect>
              </clipPath>
            </defs>
          </svg>
          <p>Total Seats: {tour?.Max_Capacity}</p>
        </span>

        {/* <p>Remaining Seats: {tour?.Max_Capacity}</p> */}
      </div>

      <div className="PERSON-box">
        <p>{tour?.price}  â‚¬/ PERSON</p>
        {/* <Link className="none-list" to=`/Memorable/$` style={{textDecoration:'none'}}> */}
        <button onClick={() => HandleTourNavigation(tour._id)}>
          Select
        </button>
        {/* </Link> */}
      </div>
    </div>
  </div>
))

}
                  
                  
                  </>
                ):(
                    <>
                    
              {

AllTours?.filter((e)=>e.destinationName.includes(name)).map((tour, i) => (
  <div className="Tours-card" key={i}>
    <div className="Tours-card-img">
      <img src={tour?.coverImage} />
    </div>
    <div className="Tours-card-tital">
      <h2>{tour?.TourName}</h2>

      <span className="Duration">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="21"
          height="21"
          viewBox="0 0 21 21"
          fill="none"
        >
          <path
            d="M10.5002 18.832C12.7103 18.832 14.8299 17.9541 16.3927 16.3913C17.9555 14.8285 18.8335 12.7088 18.8335 10.4987C18.8335 8.28856 17.9555 6.16895 16.3927 4.60614C14.8299 3.04334 12.7103 2.16536 10.5002 2.16536C8.29003 2.16536 6.17041 3.04334 4.60761 4.60614C3.0448 6.16895 2.16683 8.28856 2.16683 10.4987C2.16683 12.7088 3.0448 14.8285 4.60761 16.3913C6.17041 17.9541 8.29003 18.832 10.5002 18.832ZM10.5002 0.0820312C11.8681 0.0820313 13.2226 0.351466 14.4865 0.874953C15.7503 1.39844 16.8986 2.16573 17.8659 3.133C18.8331 4.10028 19.6004 5.2486 20.1239 6.51241C20.6474 7.77622 20.9168 9.13076 20.9168 10.4987C20.9168 13.2614 19.8194 15.9109 17.8659 17.8644C15.9124 19.8179 13.2628 20.9154 10.5002 20.9154C4.73975 20.9154 0.0834961 16.2279 0.0834961 10.4987C0.0834961 7.73603 1.18096 5.08651 3.13447 3.133C5.08797 1.1795 7.73749 0.0820313 10.5002 0.0820312ZM11.021 5.29037V10.7591L15.7085 13.5404L14.9272 14.8216L9.4585 11.5404V5.29037H11.021Z"
            fill="#FFD700"
          />
        </svg>
        <p>Duration: {tour?.TourDuration}</p>
      </span>

      {/* <div className="Seats-box">
        <span className="Duration">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="23"
            height="23"
            viewBox="0 0 23 23"
            fill="none"
          >
            <g clip-path="url(#clip0_194_965)">
              <path
                d="M17.5379 16.3699C17.767 16.282 18.013 16.2353 18.2647 16.2353H19.2794C20.2303 16.2353 21.0011 17.0061 21.0011 17.957C21.0011 18.2242 20.9389 18.4879 20.8193 18.7269L19.4307 21.5042C18.9723 22.4209 18.0354 23 17.0105 23H5.98954C4.96462 23 4.02768 22.4209 3.56933 21.5042L2.18067 18.7269C1.75544 17.8765 2.10017 16.8423 2.95064 16.417C3.1897 16.2975 3.45331 16.2353 3.72059 16.2353H4.85136C5.06125 16.2353 5.26779 16.2678 5.46424 16.3301C5.59206 13.9107 5.95332 11.2623 6.5473 8.38396C6.74187 7.4411 7.57211 6.76471 8.53483 6.76471H8.79412V5.41176H8.57795C7.83074 5.41176 7.22501 4.80603 7.22501 4.05882C7.22501 3.9843 7.23117 3.90991 7.24343 3.8364L7.6944 1.13052C7.80313 0.478148 8.36758 0 9.02895 0H13.9711C14.6324 0 15.1969 0.478148 15.3056 1.13052L15.7566 3.8364C15.8794 4.57344 15.3815 5.27051 14.6445 5.39335C14.571 5.4056 14.4966 5.41176 14.422 5.41176H14.2059V6.76471H14.4653C15.428 6.76471 16.2581 7.44098 16.4528 8.38371C17.0501 11.2762 17.4121 13.938 17.5379 16.3699ZM8.57795 4.05882H14.422L13.9711 1.35294H9.02895L8.57795 4.05882ZM10.1471 6.76471H12.8529V5.41176H10.1471V6.76471ZM15.1278 8.65731C15.0629 8.34306 14.7862 8.11765 14.4653 8.11765H8.53483C8.21392 8.11765 7.93719 8.34311 7.87233 8.65739C7.21452 11.8451 6.85009 14.7334 6.77802 17.3213L6.84677 17.3901C6.97363 17.517 7.1457 17.5882 7.32511 17.5882H15.8971C16.0137 17.5882 16.127 17.5581 16.2266 17.5026C16.1669 14.8661 15.801 11.9173 15.1278 8.65731ZM7.44118 18.9412H7.32511C6.78688 18.9412 6.27068 18.7274 5.89009 18.3468L5.3297 17.7864C5.20284 17.6595 5.03077 17.5882 4.85136 17.5882H3.72059C3.66334 17.5882 3.60688 17.6016 3.55568 17.6272C3.37354 17.7182 3.2997 17.9397 3.39078 18.1219L4.77943 20.8992C5.00861 21.3575 5.47708 21.6471 5.98954 21.6471H17.0105C17.5229 21.6471 17.9914 21.3575 18.2206 20.8992L19.6092 18.1219C19.6348 18.0707 19.6481 18.0142 19.6481 17.957C19.6481 17.7533 19.4831 17.5882 19.2794 17.5882H18.2647C18.0518 17.5882 17.8513 17.6885 17.7235 17.8588L17.5206 18.1294C17.1373 18.6404 16.5358 18.9412 15.8971 18.9412H15.5588V19.6176C15.5588 19.9913 15.256 20.2941 14.8824 20.2941C14.5087 20.2941 14.2059 19.9913 14.2059 19.6176V18.9412H12.1765V19.6176C12.1765 19.9913 11.8736 20.2941 11.5 20.2941C11.1264 20.2941 10.8235 19.9913 10.8235 19.6176V18.9412H8.79412V19.6176C8.79412 19.9913 8.49125 20.2941 8.11765 20.2941C7.74404 20.2941 7.44118 19.9913 7.44118 19.6176V18.9412ZM14.2059 13.8676C14.5795 13.8676 14.8824 14.1705 14.8824 14.5441C14.8824 14.9177 14.5795 15.2206 14.2059 15.2206H8.79412C8.42051 15.2206 8.11765 14.9177 8.11765 14.5441C8.11765 14.1705 8.42051 13.8676 8.79412 13.8676H14.2059ZM13.8676 10.4853C14.2413 10.4853 14.5441 10.7882 14.5441 11.1618C14.5441 11.5354 14.2413 11.8382 13.8676 11.8382H9.13235C8.75875 11.8382 8.45588 11.5354 8.45588 11.1618C8.45588 10.7882 8.75875 10.4853 9.13235 10.4853H13.8676Z"
                fill="#FFD700"
              ></path>
            </g>
            <defs>
              <clipPath id="clip0_194_965">
                <rect width="23" height="23" fill="white"></rect>
              </clipPath>
            </defs>
          </svg>
          <p>Total Seats: {tour?.Max_Capacity}</p>
        </span>

        <p>Remaining Seats: {tour?.Max_Capacity}</p>
      </div> */}

      <div className="PERSON-box">
      <p>{tour?.price} euro/ PERSON</p>
        {/* <Link className="none-list" to=`/Memorable/$` style={{textDecoration:'none'}}> */}
        <button onClick={() => HandleTourNavigation(tour._id)}>
          Select
        </button>
        {/* </Link> */}
      </div>
    </div>
  </div>
))

}
                    
                    </>

                )
              
            
            
            }



            </div>

            <div className="tour-btn-box">
              <button className="hover-btn">
                <span>View More</span>
              </button>
            </div>
          </div>
        </div>
      </section>
    </>
  );
};

export default Tours;
